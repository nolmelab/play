# 아키텍처 다시 생각하기 

분산 처리는 생각보다 훨씬 더 어렵습니다. 뒷단과 통신은 항상 call()을 사용하여 
전송을 못 하거나 연결이 끊어지면 처리하도록 해야 합니다. 

단선 상태를 별도로 처리할 수도 있겠으나 항상 call()을 사용하도록 하면 
함께 처리 가능하고 간단한 람다로 일관되게 처리할 수 있습니다. 

보다 근본적인 해결책은 무엇일까요? 마치 하나의 장비에서 실행되는 것처럼 
할 수는 없을까요?  한 장비에 두 개의 프로세스로 나누어진 경우도 
분산 처리와 동일한 문제들이 있습니다. 한 프로세스가 동작하지 않을 수 
있기 때문입니다. 

at least once, at most once (exactly once)를 지원하는 메세지 큐를 
사용하여 해결하려는 경우를 보았습니다. 이 방법으로도 해결이 되는 것 
같습니다. call()로도 해결이 됩니다. 장단점은 있습니다. 

call() 함수를 void 리턴 함수로 하고 send() 실패시 call back 호출을 
하여 단선과 같은 에러 처리를 하도록 했습니다. 응답을 받지 않는 경우에 
대한 호출도 함께 추가했습니다.



