# 테스트

단위 테스트를 진행하면서 나온 오류들과 해결 방법, 개션 내용들을 정리합니다. 

## act의 shared_ptr 생성 

항상 액트들 (액터 / 컴포넌트도 마찬가지로)은 shared_ptr이어야 합니다. 

이는 C#이나 golang과 같이 가비지 컬렉션에 기반한 런타임을 갖는 언어만큼 
c++을 안정적으로 만드는데 크게 기여합니다. 

게임 서버 코드가 보통 10만에서 50만라인까지 대규모 코드를 갖기 때문에 
쓰기 쉽고 안정적인 c++의 subset을 사용할 필요가 있습니다. 

이를 강제할 적절한 방법은 없을까요?

## jump 테스트와 개선 

jump가 act에 기반한 HFSM의 핵심입니다. HFSM화는 act_serial과 act_parallel이 맡습니다. 
flow는 루트 액트로 act_serial입니다. 

- flow가 붙는 건 기능으로 만듭니다. /flow/... 
- 상대 경로로 자식으로 깊이 이동하는 건 어렵습니다. 
  - act_serial은 activate()되면 첫 자식도 activate() 시킵니다. 
  - act_parallel은 activate()되면 모든 자식을 activate() 시킵니다. 
  - 이와 같은 단순한 아이디어를 유지하는 것이 좋겠습니다. 

- on_activate()에서 시그널을 보내고 jump를 하면 긴 루프를 형성하게 됩니다. 
  - 시그널 발생과 점프는 이 호출 스택을 벗어난 곳에서 해야 스택이 쌓이는 걸 피할 수 있습니다. 
  - 타이머를 두도록 수정. ensure에 대한 의존을 flow로 제한. start(), stop()으로 분리된 인터페이스 사용 
    - 최선인가요? 





 





