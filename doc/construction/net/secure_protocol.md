# secure protocol 

- 기본 프로토콜이 될 것이므로 잘 설계하고 작성해야 합니다. 
- plain_protocol로 교체를 쉽게 할 수 있어야 합니다. 
- 단위 테스트를 진행할 수 있도록 합니다. 
  - codec에서 한 실수를 다시 하지 않도록 주의합니다. 
- 단위 테스트 자체의 코드 품질도 매우 중요합니다. 

## 단위 테스트 

테스트 과정에서 다음과 같은 오류를 만났습니다. 
  - handshake() 프레임 수신 후 바로 다른 데이터 프레임을 수신하는 경우 처리 누락 

설계에 대해 재검토를 해봤고 괜찮다고 판단합니다. 
  - encode, decode, handshake 인터페이스가 세션과 잘 맞지 않은가 했으나 괜찮음 

test_server, test_client에 다양한 예외 상황을 만들 수 있도록 구성하여 테스트를 
진행하려고 합니다. 예외에 대한 테스트와 코드 커버리지는 중요한 두 가지 방향입니다. 

테스트를 기능별로 일반적으로 구현하고 정책 클래스를 통해 구성 가능하면 
다양한 테스트를 보다 편리하게 할 수 있습니다. 이러한 예는 github의 많은 좋은 프로젝트에서 
진행하는 방식입니다. 아직 부족하지만 점차 개선해 나가려고 합니다. 

## 암호화 플래그 

프레임에 enc 필드가 있습니다. 헤더에 이런 정보가 있으면 패킷을 수정할 수 있습니다. 
스위치 같은 장비가 변경한다고 하면 해당 프레임의 내용을 변경할 수 있습니다. 

만약 암호화된 토픽들 목록을 갖고 처리하면 서버에서 하드 코딩된 토픽에 대해 
암호화를 강제할 수 있습니다. 다른 방법은 enc를 두지 않고 항상 암호화하는 방법이 있는데 
게임에 적합하지는 않는 듯 합니다. 

일반적인 IT의 접근은 HTTPS처럼 암호화 통신이면 모든 것을 암호화 하는 방식을 취하는 것입니다. 

robust에서는 암호화를 통해 기밀성만 유지하고 변조 가능성은 남겨두는 것으로 일단 진행합니다. 














